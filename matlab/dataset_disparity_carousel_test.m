addpath('quaternion');
datasetPath = '~/Downloads/MH_01_easy';

disp('Loading dataset...')
dataset = dataset_load(datasetPath);
sensor0 = dataset_read_yaml('~/Downloads/MH_01_easy/mav0/cam0/sensor.yaml')
intrinsics0 = cameraIntrinsics( ...
    [sensor.intrinsics{1, 1} sensor.intrinsics{1, 2}], ...
    [sensor.intrinsics{1, 3} sensor.intrinsics{1, 4}], ...
    [sensor.resolution{1, 1} sensor.resolution{1, 2}], ...
    RadialDistortion = [sensor.distortion_coefficients{1, 1} sensor.distortion_coefficients{1, 2}], ...
    TangentialDistortion = [sensor.distortion_coefficients{1, 3} sensor.distortion_coefficients{1, 4}] ...
   );

params = cameraParameters( ...
    K = intrinsics.K, ...
    ImageSize = intrinsics.ImageSize, ...
    RadialDistortion = instrinsics.RadialDistortion, ...
    TangentialDistortion = instrinsics.TangentialDistortion ...
    );

dataset_disparity_carousel(datasetPath, dataset, 100);